# SOL ä½™é¢æŠ•ç¥¨æƒé™è¦æ±‚

## ğŸ“‹ ä¿®æ”¹å†…å®¹

å·²å°†ç³»ç»Ÿä¸­çš„SOLä½™é¢è¦æ±‚ç»Ÿä¸€ä¿®æ”¹ä¸ºï¼š**é’±åŒ…ä½™é¢å¿…é¡» â‰¥ 0.1 SOL æ‰èƒ½è·å¾— 3 å¼ æŠ•ç¥¨ç¥¨æ®**

## ğŸ”§ ä¿®æ”¹çš„æ–‡ä»¶

### 1. åç«¯API
- `app/api/users/connect/route.ts` - ç”¨æˆ·è¿æ¥APIï¼Œç¥¨æ®åˆ†é…é€»è¾‘
- `app/api/voting-rounds/[id]/vote/route.ts` - æŠ•ç¥¨æäº¤APIï¼Œä½™é¢éªŒè¯

### 2. å‰ç«¯ç»„ä»¶  
- `components/wallet/SolanaWalletIntegration.tsx` - é’±åŒ…é›†æˆç»„ä»¶
- `components/sections/VotingSection.tsx` - æŠ•ç¥¨ç•Œé¢è§„åˆ™æ˜¾ç¤º
- `components/sections/TokenomicsSection.tsx` - ä»£å¸ç»æµå­¦è¯´æ˜

## ğŸ¯ æŠ•ç¥¨æƒé™è§„åˆ™

| SOL ä½™é¢ | æŠ•ç¥¨æƒé™ | è¯´æ˜ |
|---------|---------|------|
| â‰¥ 0.1 SOL | 3 ç¥¨ | è·å¾—å®Œæ•´æŠ•ç¥¨æƒé™ |
| < 0.1 SOL | 0 ç¥¨ | æ— æŠ•ç¥¨æƒé™ |
| ä½™é¢æ£€æŸ¥å¤±è´¥ | 0 ç¥¨ | ç½‘ç»œé—®é¢˜æ—¶æ— æŠ•ç¥¨æƒé™ |

## ğŸ§ª æµ‹è¯•éªŒè¯

è¿è¡Œæµ‹è¯•è„šæœ¬éªŒè¯é€»è¾‘ï¼š

```bash
node test-voting-balance.js
```

æµ‹è¯•ç”¨ä¾‹åŒ…æ‹¬ï¼š
- ä½™é¢å……è¶³ (0.15 SOL) â†’ åº”è·å¾— 3 ç¥¨
- ä½™é¢åˆšå¥½ (0.1 SOL) â†’ åº”è·å¾— 3 ç¥¨  
- ä½™é¢ä¸è¶³ (0.05 SOL) â†’ åº”è·å¾— 0 ç¥¨
- ç©ºé’±åŒ… (0 SOL) â†’ åº”è·å¾— 0 ç¥¨

## ğŸ’¡ å®ç°é€»è¾‘

### æ–°ç”¨æˆ·æ³¨å†Œ
```javascript
const minBalance = 0.1; // å›ºå®šè¦æ±‚0.1 SOL

if (balanceCheckFailed) {
  initialVotes = 0; // ä½™é¢æ£€æŸ¥å¤±è´¥ï¼Œæ— æŠ•ç¥¨æƒ
} else if (solBalance >= minBalance) {
  initialVotes = 3; // æ»¡è¶³è¦æ±‚ï¼Œè·å¾—3ç¥¨
} else {
  initialVotes = 0; // ä½™é¢ä¸è¶³ï¼Œæ— æŠ•ç¥¨æƒ
}
```

### ç°æœ‰ç”¨æˆ·æ›´æ–°
```javascript
if (solBalance >= minBalance) {
  // ä½™é¢å……è¶³ï¼Œç¡®ä¿æœ‰3ç¥¨æŠ•ç¥¨æƒ
  if (user.availableVotes === 0) {
    user.availableVotes = 3;
  }
} else {
  // ä½™é¢ä¸è¶³ï¼Œæ¸…é›¶æŠ•ç¥¨æƒ
  user.availableVotes = 0;
}
```

### æŠ•ç¥¨æ—¶éªŒè¯
```javascript
const requiredBalance = 0.1; // å›ºå®šè¦æ±‚0.1 SOL

if ((user.solBalance || 0) < requiredBalance) {
  return NextResponse.json({
    error: `æŠ•ç¥¨éœ€è¦è‡³å°‘ ${requiredBalance} SOL ä½™é¢ï¼Œå½“å‰ä½™é¢: ${user.solBalance || 0}`
  }, { status: 400 });
}
```

## âœ… éªŒè¯æ¸…å•

- [x] åç«¯APIæ­£ç¡®éªŒè¯0.1 SOLè¦æ±‚
- [x] å‰ç«¯ç»„ä»¶æ˜¾ç¤ºæ­£ç¡®çš„ä½™é¢è¦æ±‚
- [x] æŠ•ç¥¨è§„åˆ™è¯´æ˜å·²æ›´æ–°
- [x] ä»£å¸ç»æµå­¦æè¿°å·²æ›´æ–°
- [x] æµ‹è¯•è„šæœ¬éªŒè¯é€»è¾‘æ­£ç¡®æ€§
- [x] ç§»é™¤å¼€å‘ç¯å¢ƒç‰¹æ®Šå¤„ç†

## ğŸš€ éƒ¨ç½²æ³¨æ„äº‹é¡¹

1. ç¡®ä¿æ•°æ®åº“ä¸­ç°æœ‰ç”¨æˆ·çš„æŠ•ç¥¨æƒé™ä¼šæ ¹æ®æ–°è§„åˆ™é‡æ–°è¯„ä¼°
2. å‰ç«¯æ˜¾ç¤ºçš„ä½™é¢è¦æ±‚å·²ç»Ÿä¸€ä¸º0.1 SOL
3. æ‰€æœ‰ç›¸å…³æ–‡æ¡£å’Œè¯´æ˜å·²æ›´æ–°
4. æµ‹è¯•è„šæœ¬å¯ç”¨äºéªŒè¯éƒ¨ç½²åçš„åŠŸèƒ½ 